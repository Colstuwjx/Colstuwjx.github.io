---
title: "[ ç¿»è¯‘ ] è½¯ä»¶æ¶æ„å’Œç³»ç»Ÿè®¾è®¡ï¼šæˆ‘è¦æ˜¯æ—©ç‚¹çŸ¥é“å°±å¥½äº†â€¦â€¦"
date: 2023-01-27T08:00:00+08:00
tags: ["soft-arch", "translation"]
categories: ["translation"]
comments: false
showMeta: false
showAction: false
aliases:
    - /translate-soft-arch-i-wish-i-had-known-earlier/
---

ã€ç¼–è€…æŒ‰ã€‘æœ¬æ–‡ä½œè€…åŸæœ¬æ˜¯ä¸€ä¸ªä¸æ‡‚æŠ€æœ¯çš„äººï¼Œåœ¨æœ¬æ–‡é‡Œï¼Œå¥¹åˆ†äº«äº†è‡ªå·±é˜…è¯» Artur Ejsmont çš„ã€Šå†™ç»™åˆ›ä¸šå·¥ç¨‹å¸ˆçš„ Web å¯æ‰©å±•æ€§ã€‹ä¸€ä¹¦ç•™ä¸‹çš„è¯»ä¹¦ç¬”è®°ã€‚

<!--more-->

ä½œä¸ºä¸€ä¸ªéæŠ€æœ¯äººå‘˜ï¼Œæˆ‘æ€»æ˜¯åœ¨åŠªåŠ›ç†è§£åº”ç”¨ç¨‹åºçš„åº•å±‚å®ç°ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¿™æ–¹é¢æœ‰äº†å¾ˆå¤§æ”¹å–„ï¼šæ„Ÿè°¢å„ç±»ä¹¦ç±ã€æ–‡ç« ã€æŠ€æœ¯æ²™é¾™ï¼Œæˆ‘ä¸€äº›ææŠ€æœ¯çš„æœ‹å‹ï¼Œå½“ç„¶ï¼Œè¿˜æœ‰ä¸€ä½ Java å¼€å‘è€…ï¼Œä»–åŒæ—¶ä¹Ÿæ˜¯æˆ‘çš„ä¸ˆå¤« :)

![picture-01](https://miro.medium.com/max/1400/1*88Q4_fFjfGCEXhJXHusRgg.webp)
*Hmmâ€¦ ğŸ¤”*

åœ¨è¿™ä¸ªæ•…äº‹é‡Œï¼Œæˆ‘æƒ³æ¨èå’Œå›é¡¾ä¸€æœ¬ä¹¦ï¼Œæˆ‘è®¤ä¸ºå¯¹äºæ²¡æœ‰ä»»ä½•æŠ€æœ¯èƒŒæ™¯æˆ–è€…ç›¸å…³æ•™è‚²ç»å†ï¼ˆæˆ–è€…æœ‰ï¼Œä½†æ˜¯åœ¨å®é™…çš„å·¥ä½œç¯å¢ƒé‡Œä¸ç¡®å®šï¼‰çš„äººæ¥è¯´éƒ½æ˜¯å¿…é¡»ä¸€è¯»çš„ã€‚è¿™æœ¬ä¹¦å°±æ˜¯ [Artur Ejsmont ç¼–å†™çš„ "å†™ç»™åˆ›ä¸šå·¥ç¨‹å¸ˆçš„ Web å¯æ‰©å±•æ€§"](https://www.amazon.ca/Scalability-Startup-Engineers-Artur-Ejsmont/dp/0071843655)ã€‚å°½ç®¡è¯¥ä¹¦ä»‹ç»çš„æ˜¯æœ‰å…³ Web åº”ç”¨ç¨‹åºçš„å¯æ‰©å±•æ€§ï¼Œä½†æ˜¯å®ƒå®é™…ä¸Šä¹Ÿè§£é‡Šäº†è½¯ä»¶æ¶æ„çš„æ ¸å¿ƒæ¦‚å¿µå’Œç»„ä»¶ã€‚è¿™æœ¬ä¹¦æ˜¯å¦‚ä½•çš„æ¸…æ™°æ˜äº†ç®€ç›´æ— æ³•ç”¨è¯­è¨€æ¥å½¢å®¹ï¼

## é‡è¦ç¬”è®°

è¿™ä¸ªæ•…äº‹å®Œå…¨æ˜¯åŸºäº **Artur Ejsmont** çš„ä¸“ä¸šçŸ¥è¯†ï¼Œæˆ‘å¯ä¸ä¼šåœ¨è‡ªå·±è¿˜æ²¡æˆä¸ºä¸“å®¶çš„æ—¶å€™å‡è£…è‡ªå·±æ˜¯ï¼ˆè‡³å°‘ç°åœ¨è¿˜ä¸æ˜¯ ğŸ˜ ï¼‰ã€‚

æˆ‘åœ¨è¿™ä¸ªæ•…äº‹é‡Œåˆ†äº«çš„å†…å®¹éå¸¸æœ‰é™ã€‚åœ¨çœ‹è¿™æœ¬ä¹¦çš„æ—¶å€™ï¼Œæˆ‘è‡ªå·±å‡†å¤‡äº†ä¸€ä¸ªé•¿è¾¾ 20 é¡µçš„ Google Docs æ‘˜è¦ã€‚å¦‚æœä½ æƒ³è¦æé«˜ä½ å¯¹äºè½¯ä»¶æ¶æ„çš„ç†è§£ï¼Œæˆ‘å»ºè®®ä½ çœ‹çœ‹è¿™æœ¬ä¹¦ï¼Œå‡†å¤‡ä¸€ä¸ªæ‘˜è¦ï¼Œç„¶åå’ŒæŠ€æœ¯æœ‹å‹æˆ–è€…åŒäº‹è®¨è®ºä¸‹ä½ å­¦åˆ°çš„ä¸œè¥¿ã€‚

### è¦è®°ä½çš„ä¸€å¼ å›¾

![picture-02](https://miro.medium.com/max/1400/0*Tf8LCGFIzp15Vugj)
*Web åº”ç”¨æ¶æ„æ¦‚è§ˆ (å†™ç»™åˆ›ä¸šå·¥ç¨‹å¸ˆçš„ Web å¯æ‰©å±•æ€§, 2015, Artur Ejsmont, ç¬¬ 23 é¡µ)*

0. **å®¢æˆ·**ï¼šä½ çš„ Web åº”ç”¨ç¨‹åºçš„ç»ˆç«¯ç”¨æˆ·
1. **åŸŸåç³»ç»Ÿï¼ˆ DNS ï¼‰**ï¼šåŸºäºä¸€ä¸ªåŸŸåï¼ˆ ä¾‹å¦‚ olgamitroshyna.com ï¼‰å®šä¹‰äº†ä¸€ä¸ª IP åœ°å€ï¼ˆ å¯¹åº”åˆ°å°†ä¼šå¤„ç†ç”¨æˆ·è¯·æ±‚çš„æŸå°æœåŠ¡å™¨çš„åœ°å€ ï¼‰
2. **è´Ÿè½½å‡è¡¡**ï¼šåœ¨å¤šå°æœåŠ¡å™¨ä¹‹é—´åˆ†é…æµé‡ä»¥åˆ†æ‹…å·¥ä½œè´Ÿè½½
3ï¼Œ5. **ç¼“å­˜**ï¼šå­˜å‚¨æ•°æ®ä»è€Œæ›´å¿«åœ°å“åº”ç”¨æˆ·è¯·æ±‚
4. **å‰ç«¯åº”ç”¨ï¼ˆ Front-end ï¼‰**ï¼šè¿™æ˜¯ç”¨æˆ·æ¥å£ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºçš„çš®è‚¤ï¼Œä¸€ä¸ªè¡¨ç°å±‚
6. **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šå­˜å‚¨ç”¨æˆ·è¯·æ±‚ä»¥ä¾› Web æœåŠ¡ä½œè¿›ä¸€æ­¥çš„å¤„ç†
7. **Web æœåŠ¡ï¼ˆ Back-end ï¼‰**ï¼šä¸šåŠ¡é€»è¾‘ï¼ˆåº”ç”¨ç¨‹åºåŠŸèƒ½ï¼‰æ‰€å¤„ä½ç½®
8. **æ•°æ®å­˜å‚¨**ï¼šWeb æœåŠ¡å†™æ•°æ®å’Œè¯»æ•°æ®çš„åœ°æ–¹
9. **æœç´¢å¼•æ“**ï¼šå“åº”æ•°æ®å­˜å‚¨æ— æ³•æœ‰æ•ˆå¤„ç†çš„ä¸€äº›å¤æ‚æœç´¢æŸ¥è¯¢
10. **å†…å®¹äº¤ä»˜ç½‘ç»œï¼ˆ CDN ï¼‰**ï¼šå­˜å‚¨åƒå›¾ç‰‡ã€CSS æ ·å¼å’Œ JavaScript æ–‡ä»¶ç­‰é™æ€æ–‡ä»¶ï¼Œè®©ç”¨æˆ·è¯·æ±‚å“åº”é€Ÿåº¦æ›´å¿«
11. **é˜Ÿåˆ—å·¥ä½œè€…**ï¼šä½¿ç”¨ä¸€æ‰¹é¢å¤–çš„æœåŠ¡å™¨æ¥å¤„ç†æ¥è‡ªæ¶ˆæ¯é˜Ÿåˆ—çš„è¯·æ±‚ï¼ˆå³æ¶ˆæ¯ï¼‰

### å‰ç«¯å±‚

å‰ç«¯å±‚ç»„ä»¶åŒ…æ‹¬ï¼š

* DNSï¼›
* CDNï¼›
* è´Ÿè½½å‡è¡¡/åå‘ä»£ç†ã€‚å¯ä»¥æ˜¯ä¸‰ç§ç±»å‹é‡Œçš„å…¶ä¸­ä¸€ç§ï¼š

  a) ä¸€ä¸ªæ‰˜ç®¡æœåŠ¡ï¼ˆ æ¯”å¦‚äºšé©¬é€Šäº‘æä¾›çš„å¼¹æ€§è´Ÿè½½å‡è¡¡å™¨ï¼ˆ ELB ï¼‰ ï¼‰ï¼›
  b) ä¸€ä¸ªè‡ªç»´æŠ¤çš„è½¯è´Ÿè½½å‡è¡¡å™¨ï¼ˆ æ¯”å¦‚ Nginx ï¼‰ï¼›
  c) ä¸€ä¸ªç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨

* å‰ç«¯ Web æœåŠ¡å™¨ï¼ˆ ä¸€ä¸ªè¡¨ç°å±‚ä»¥åŠåç«¯ç»“æœçš„èšåˆå±‚ï¼Œç”¨åˆ°çš„æŠ€æœ¯æœ‰ï¼šPHPã€Pythonã€Groovyã€Ruby æˆ–è€… JavaScriptï¼ˆ Node.Js ï¼‰ ï¼‰

åŒæ ·é‡è¦çš„æ˜¯è¦çŸ¥é“å‰ç«¯å±‚é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥å­˜å‚¨**HTTP ä¼šè¯**ç›¸å…³çš„ä¿¡æ¯ï¼ˆ æœ‰å…³ç”¨æˆ·çš„æ•°æ® ï¼‰ï¼ša) cookie; æˆ–è€… b) å¤–éƒ¨æ•°æ®å­˜å‚¨ï¼›åˆæˆ–æ˜¯ c) å¦‚æœæ˜¯ä¼šè¯ä¿æŒçš„åœºæ™¯é‚£å°†ä¼šéœ€è¦ç”¨åˆ°è´Ÿè½½å‡è¡¡å™¨ï¼šè´Ÿè½½å‡è¡¡å™¨éœ€è¦ç¡®ä¿å…·æœ‰ç›¸åŒä¼šè¯ cookie çš„è¯·æ±‚å§‹ç»ˆè¢«è½¬å‘åˆ°æœ€åˆå‘å¸ƒè¯¥ cookie çš„æœåŠ¡å™¨ã€‚

### åç«¯å±‚ / web æœåŠ¡

å®ç°ä¸€ä¸ª app çš„å‡ ç§é€‰æ‹©ï¼š

1. æ„å»ºä¸€ä¸ªå•ä½“çš„åº”ç”¨ï¼Œç„¶åæ ¹æ®ä¸šåŠ¡éœ€è¦å¢åŠ  web æœåŠ¡ï¼›
2. éµå¾ª API ä¼˜å…ˆçš„è®¾è®¡ç†å¿µï¼šæ‰€æœ‰å®¢æˆ·ç«¯ï¼ˆ ç§»åŠ¨ç«¯ appï¼Œæ¡Œé¢ç½‘ç«™ï¼Œç§»åŠ¨ç«¯ç½‘ç«™ï¼Œç­‰ç­‰ ï¼‰å’Œä¸€ä¸ª Web åº”ç”¨ç¨‹åºäº¤äº’æ—¶ä½¿ç”¨çš„å‡æ˜¯ç›¸åŒçš„ä¸€å¥— API æ¥å£ï¼›
3. ç»“åˆä»¥ä¸Šè¿™ä¸¤è€…

web æœåŠ¡çš„ç±»å‹ï¼š

* ä»¥åŠŸèƒ½ä¸ºä¸­å¿ƒ

> èƒ½å¤Ÿåœ¨è¿œç¨‹æœºå™¨ä¸Šè°ƒç”¨å‡½æ•°çš„ä¸€äº›æ–¹æ³•ï¼ŒåŒæ—¶æ— éœ€çŸ¥é“è¿™äº›å‡½æ•°å…·ä½“æ˜¯å¦‚ä½•å®ç°çš„ï¼›

> ä¾‹å­ï¼šSOAPï¼ˆ ä½¿ç”¨ XML å’Œ HTTP åè®® ï¼‰ï¼›SOAP æ¯” REST åè®®æ›´å¤æ‚ä½†ä¹Ÿæ›´å®‰å…¨ï¼ŒREST åœ¨æ–‡æ¡£æ–¹é¢æ¯” SOAP æ›´è½»é‡ä¸€äº›

* ä»¥èµ„æºä¸ºä¸­å¿ƒï¼ˆ REST + JSON ï¼‰

> å„ç§èµ„æºè¢«è§†ä¸ºä¸€ä¸ªä¸ªçš„å¯¹è±¡ï¼Œç„¶åé’ˆå¯¹è¿™äº›å¯¹è±¡å¯ä»¥æ‰§è¡Œå››ç±»æ“ä½œï¼šè¯»å–ã€åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤ï¼ˆ GETï¼ŒPOSTï¼ŒPUTï¼ŒDELETE ï¼‰ï¼›

> REST éœ€è¦é€šè¿‡è®¤è¯æ¥è®¿é—®å¯¹åº”çš„èµ„æºï¼ˆ OAuth 2 ï¼‰ï¼›

> å–å†³äºä¼ è¾“å±‚çš„å®‰å…¨æ€§ï¼ˆ HTTPS ï¼‰

æ‰©å±• REST åè®®çš„ web æœåŠ¡ï¼š

* æŒ‰ç…§åŠŸèƒ½æ¥åˆ†ç‰‡/åˆ†åŒº

> ä¸€ç§å°†æœåŠ¡æ‹†åˆ†æˆæ›´å°ã€ç‹¬ç«‹çš„ web æœåŠ¡çš„æ–¹æ³•ï¼Œå…¶ä¸­æ¯ä¸ª web æœåŠ¡éƒ½ä¸“æ³¨äºæŸé¡¹ç‰¹å®šçš„åŠŸèƒ½ï¼›

> å„ä¸ª web æœåŠ¡ä¹‹é—´å¯èƒ½ä¼šå­˜åœ¨ä¸€äº›ä¾èµ–å…³ç³» â€”â€” è¿™æ²¡å•¥ï¼ˆ ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·ä»ç›®å½•é‡Œä¿å­˜æŸäº›äº§å“æ—¶ï¼Œåœ¨ç”¨æˆ·ï¼ˆ UserProfileService ï¼‰å’Œäº§å“ç›®å½•ï¼ˆ ProductCatalogService ï¼‰ä¹‹é—´ä¾¿å»ºç«‹äº†è”ç³» ï¼‰ï¼›

> æ¯ä¸ª web æœåŠ¡éƒ½å¯ä»¥ç‹¬ç«‹æ‰©å±•ï¼›

> æœåŠ¡ä¹‹é—´çš„æ•´åˆå¯èƒ½ä¼šå…·æœ‰æŒ‘æˆ˜æ€§ï¼›

> ä½œè€…å»ºè®®åªæœ‰åœ¨æŠ€æœ¯å›¢é˜Ÿè¶…è¿‡ 10ï½20 åå·¥ç¨‹å¸ˆæ—¶æ‰è€ƒè™‘ä½¿ç”¨é¢å‘æœåŠ¡çš„æ¶æ„å’Œ web æœåŠ¡

* å¢åŠ å…‹éš†å‰¯æœ¬æ•°

* HTTP åè®®ç¼“å­˜

> å½“ GET è¯·æ±‚çš„å“åº”è¢«ç¼“å­˜æ—¶ï¼ˆå½“ä¸€ä¸ªè¯·æ±‚è¢«åº”ç­”æ—¶è¿”å›çš„æ˜¯ç¼“å­˜é‡Œçš„æ•°æ®è€Œä¸å†å»é—®è¯¢ web æœåŠ¡è·å¾—å“åº”ï¼‰

### ä¸€äº›å¯æ‰©å±•æ€§çš„è§£å†³æ–¹æ¡ˆ

1. å¢åŠ æ›´å¤šçš„å…‹éš†å‰¯æœ¬/æœåŠ¡å™¨ï¼ˆ æœ€ç®€å•ã€æœ€å»‰ä»·çš„æ–¹å¼ ï¼‰ï¼›
2. æŒ‰åŠŸèƒ½åˆ’åˆ†ï¼ˆ æœåŠ¡å™¨ä¸“é¡¹åŒ–ï¼Œé‡‡ç”¨é¢å‘æœåŠ¡çš„æ¶æ„ï¼ˆ SOA ï¼‰ï¼Œéœ€è¦èŠ±è´¹æ›´å¤šçš„ç²¾åŠ›ï¼Œä¸€äº›åŠŸèƒ½æ˜¯å—é™çš„ ï¼‰ï¼›
3. æŒ‰æ•°æ®åˆ’åˆ†ï¼ˆ å‚è§ä¸‹é¢çš„ "æ•°æ®å±‚" ä¸€æ®µ ï¼‰

### æ•°æ®å±‚

ä¼ ç»Ÿçš„æ‰©å±•æ–¹å¼ â€”â€”â€” å‚ç›´æ‰©å±•ï¼ˆ è´­ä¹°æ›´å¼ºå¤§çš„æœåŠ¡å™¨ï¼Œå¢åŠ å†…å­˜ï¼Œæ·»åŠ æ›´å¤šçš„ç¡¬ç›˜ç­‰ ï¼‰ã€‚

#### æ‰©å±•ä¸€ä¸ªå…³ç³»å‹æ•°æ®å­˜å‚¨ï¼ˆ ä¾‹å¦‚ MySQL ï¼‰ï¼š

1. å¤åˆ¶åŒæ­¥

> åŒä¸€ä»½æ•°æ®åˆ›å»ºå‡ºå¤šä¸ªå‰¯æœ¬å¹¶åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼›

> éœ€è¦åŒæ­¥ä¸¤å°æœåŠ¡å™¨ä¹‹é—´çš„çŠ¶æ€ï¼šæºå’Œå‰¯æœ¬ï¼›

> æ•°æ®ä¿®æ”¹ â€”â€” ä»…é€šè¿‡æºæœåŠ¡å™¨æ‰§è¡Œç›¸å…³çš„å†™æ“ä½œï¼Œä½†æ˜¯è¯»å–æŸ¥è¯¢å¯ä»¥åˆ†å¸ƒåœ¨å¤šä¸ªå‰¯æœ¬ä¹‹é—´ï¼›

> å¤åˆ¶åŒæ­¥çš„å‡ ç‚¹æŒ‘æˆ˜ï¼ša) åªæ‰©å±•è¯»ï¼ˆ éå¸¸é€‚åˆè¯»å¯†é›†å‹åº”ç”¨ç¨‹åº ï¼‰ï¼›b) ä¸é€‚ç”¨äºè§£å†³ä¸€ä¸ªæ´»è·ƒå¢é•¿çš„æ•°æ®é›†é‡åˆ°çš„æ‰©å±•é—®é¢˜ï¼›c) å‰¯æœ¬å¯èƒ½è¿”å›è¿‡æœŸçš„æ•°æ®ã€‚

2. æ•°æ®åˆ†åŒº/åˆ†ç‰‡

> å°†æ•°æ®é›†åˆ‡åˆ†æˆæ›´å°çš„éƒ¨åˆ†ï¼ˆ æ— éœ€å¤„ç†æ•´ä¸ªæ•°æ®é›† ï¼‰ï¼›

> **Sharding key** æ˜¯åˆ†åŒºçš„ä¸€ä¸ªæ ‡å‡†ï¼ˆ æ¯”å¦‚ä¸€ä¸ªç½‘åº—ä¼šæœ‰ä¸€äº›æ³¨å†Œçš„ç”¨æˆ·ï¼Œä¸€ä¸ªç”¨æˆ· ID å¯ä»¥ä»£è¡¨ä¸€ä¸ªåˆ†ç‰‡ï¼Œæ‰€ä»¥ä»»ä½•ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è®¢å•ï¼Œå‡ä¼šå­˜å‚¨åˆ°é‚£ä¸ªåˆ†ç‰‡ä¸Šï¼‰ï¼›

> ç¼ºç‚¹ï¼ša) åŠ å¤§äº†å·¥ä½œé‡å’Œå¤æ‚æ€§ï¼›b) ä½ æ— æ³•è·¨å¤šä¸ªåˆ†ç‰‡æ‰§è¡ŒæŸ¥è¯¢ï¼›c) è§†ä½ å¦‚ä½•æ ¹æ® sharding key æ˜ å°„åˆ°å…·ä½“çš„æœåŠ¡å™¨ç¼–å·è€Œå®šï¼Œæœ‰æ—¶å€™å¯èƒ½ä¼šå¾ˆéš¾å†åœ¨åŸºç¡€è®¾æ–½é‡Œæ·»åŠ æ›´å¤šçš„æœåŠ¡å™¨ï¼›

> Azure SQL æ•°æ®åº“å¼¹æ€§æ‰©å±•æ˜¯ä¸€ä¸ªéšæ—¶å¯ç”¨çš„åˆ†ç‰‡è§£å†³æ–¹æ¡ˆ

#### NoSQL æ‰©å±• ( ä¾‹å¦‚ï¼šCassandra, Redis, MongoDB, Riak ä»¥åŠ CouchDB ):

Eric Brewer çš„ CAP å®šç†ï¼šä¸å¯èƒ½æ„å»ºå‡ºä¸€å¥—åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚

* ä¸€è‡´æ€§ï¼šåŒæ ·çš„æ•°æ®åŒæ—¶å¯¹æ‰€æœ‰èŠ‚ç‚¹å¯è§ï¼›
* å¯ç”¨æ€§ï¼šæ‰€æœ‰å¯ç”¨çš„èŠ‚ç‚¹éƒ½éœ€è¦å¤„ç†æ‰€æœ‰ä¼ å…¥çš„è¯·æ±‚å¹¶è¿”å›æœ‰æ•ˆçš„å“åº”ï¼›
* åˆ†åŒºï¼šé›†ç¾¤å¿…é¡»èƒ½å¤ŸæŒç»­è¿è½¬ï¼Œå°½ç®¡ç³»ç»Ÿçš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´å¯èƒ½å­˜åœ¨ä»»æ„æ•°é‡çš„é€šä¿¡æ•…éšœ

è¿™æ„å‘³ç€ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸€æ¬¡åªèƒ½æœ€å¤šæ»¡è¶³ä¸‰ä¸ªå±æ€§é‡Œçš„å…¶ä¸­ä¸¤ä¸ªã€‚æ¯”å¦‚ MongoDB ç”¨å¯ç”¨æ€§æ¢å–äº†ä¸€è‡´æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ª CP æ•°æ®å­˜å‚¨ã€‚Cassandra åˆ™æ˜¯ä¸€ä¸ª AP æ•°æ®å­˜å‚¨ â€”â€” å®ƒæä¾›å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯ 100% çš„ä¸€è‡´æ€§ã€‚

**å½“å‰çš„è¶‹åŠ¿**ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼ŒæŒ‰ç…§åŠŸèƒ½åˆ’åˆ†å‡º web æœåŠ¡å±‚å¹¶å¯¹åº”é‡‡ç”¨ä¸åŒçš„æ•°æ®å­˜å‚¨ã€‚

### ç¼“å­˜

* ç”¨äºæé«˜æ€§èƒ½å’Œå¯æ‰©å±•æ€§ï¼Œå› ä¸ºå®ƒè¿”å›çš„æ˜¯å³æ—¶å¯ç”¨çš„ç»“æœï¼›
* å°è¯•è·å–æ›´é«˜çš„ç¼“å­˜å‘½ä¸­ç‡ï¼ˆ å³ä½ å¯ä»¥é‡å¤åˆ©ç”¨ç›¸åŒçš„ç¼“å­˜å“åº”å¤šå°‘æ¬¡ ï¼‰ï¼›
* ç¼“å­˜å¯¹äºè¯»é¢‘ç¹çš„åº”ç”¨ç¨‹åºå¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯å¯¹äºå†™é¢‘ç¹çš„åº”ç”¨ç¨‹åºå¯èƒ½å°±æ²¡é‚£ä¹ˆæœ‰æ•ˆäº†ï¼›
* å¦‚æœéœ€è¦ï¼Œä»»ä½•ç¼“å­˜éƒ½å¯ä»¥åœ¨åç»­é˜¶æ®µå†åŠ ä¸Š

**åŸºäº HTTP çš„ç¼“å­˜** â€”â€” è¯»ç©¿é€ç¼“å­˜ï¼ˆ è¿™æ„å‘³ç€å®¢æˆ·ç«¯ä¼šå’Œç¼“å­˜é€šä¿¡ï¼Œåªæœ‰å½“ç¼“å­˜æ— æ³•å“åº”å®¢æˆ·ç«¯æ—¶å®ƒæ‰ä¼šè¯·æ±‚ web æœåŠ¡ ï¼‰ã€‚

åŸºäº HTTP çš„ç¼“å­˜æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š

1. æµè§ˆå™¨ç¼“å­˜

> æˆ‘ä»¬å°†æ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨é‡Œ

2. ç¼“å­˜ä»£ç†

> é€šå¸¸æ˜¯å®‰è£…åœ¨å…¬å¸çš„æœ¬åœ°ç½‘ç»œæˆ–æ˜¯ç”±äº’è”ç½‘æœåŠ¡ä¾›åº”å•†ï¼ˆ ISP ï¼‰æä¾›çš„æœåŠ¡å™¨

3. åå‘ä»£ç† ( ä¾‹å¦‚ Nginx )

> æ”¾åœ¨è‡ªå·±çš„æ•°æ®ä¸­å¿ƒï¼Œç”¨æ¥å‡å°‘ web æœåŠ¡å™¨çš„å·¥ä½œè´Ÿè½½ï¼›

> å®ƒè¿˜æ˜¯ä¸€ç§æå¥½çš„æ‰©å±•æ–¹å¼

4. CDN

> ç”¨æ¥ç¼“å­˜åƒæ˜¯å›¾ç‰‡ã€CSSæ ·å¼ã€JavaScriptã€è§†é¢‘ã€PDF ç­‰é™æ€æ–‡ä»¶ï¼ˆä½†æ˜¯å¦‚æœæœ‰éœ€è¦ä¹Ÿå¯ä»¥æä¾›åŠ¨æ€å†…å®¹ï¼‰

è‡ªå®šä¹‰å¯¹è±¡ç¼“å­˜ï¼š

1. ç¼“å­˜åœ¨å®¢æˆ·ç«¯ä¸€ä¾§çš„å¯¹è±¡

> å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„è®¾å¤‡é‡Œ

2. ç¼“å­˜å’Œä»£ç åœ¨ä¸€å—

> ä½äº web æœåŠ¡å™¨ï¼ˆ å‰ç«¯æˆ–è€…åç«¯ ï¼‰ï¼›

> å¯¹è±¡å¯ä»¥ç›´æ¥ç¼“å­˜åœ¨ï¼ša) åº”ç”¨ç¨‹åºçš„å†…å­˜/RAMï¼›b) å…±äº«å†…å­˜ï¼ˆ åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œçš„å¤šä¸ªè¿›ç¨‹å‡å¯ä»¥è®¿é—®åˆ°å®ƒä»¬ ï¼‰ï¼›c) ç¼“å­˜æœåŠ¡å™¨å¯ä»¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„åº”ç”¨ç¨‹åºï¼ˆç›¸å¯¹äºå¾®å‹ Web åº”ç”¨ç¨‹åºè€Œè¨€ï¼‰éƒ¨ç½²åœ¨æ¯å° Web æœåŠ¡å™¨ä¸Š

3. åˆ†å¸ƒå¼å¯¹è±¡ç¼“å­˜

> Redis, Memcached

### å¼‚æ­¥å¤„ç†

åŒæ­¥å¤„ç† â€”â€” è°ƒç”¨æ–¹å‘é€è¯·æ±‚åä¼šä¸€ç›´ç­‰å¾…ç›´åˆ°è¿”å›å“åº”æ‰ä¼šç»§ç»­åŸæœ¬çš„å·¥ä½œã€‚æ‚¨æ— æ³•ä½¿ç”¨åŒæ­¥å¤„ç†æ–¹å¼æ„å»ºç°ä»£çš„å“åº”å¼åº”ç”¨ç¨‹åºã€‚

å¼‚æ­¥å¤„ç† â€”â€” å®¢æˆ·ç«¯å¯ä»¥åœ¨ä¸çŸ¥é“è¯·æ±‚æ˜¯å¦è¢«å¤„ç†å®Œæˆçš„æƒ…å†µä¸‹å®Œæˆè‡ªå·±çš„å·¥ä½œï¼Œéµå¾ª"å³å‘å³å¿˜"çš„åŸåˆ™ã€‚

æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ç§å¼‚æ­¥å¤„ç†æŠ€æœ¯ï¼š

* æ¶ˆæ¯ç”Ÿäº§è€… â€”â€” å®¢æˆ·ç«¯ä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œåˆ›å»ºæ¶ˆæ¯ç„¶åå°†å…¶å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ã€‚
* æ¶ˆæ¯é˜Ÿåˆ— â€”â€” ä¸ºæ¶ˆè´¹è€…å‘é€å’Œç¼“å†²æ¶ˆæ¯çš„åœ°æ–¹ï¼›
* æ¶ˆæ¯æ¶ˆè´¹è€… â€”â€” æ¥æ”¶å’Œå¤„ç†æ¥è‡ªæ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯ã€‚æ¶ˆæ¯æ¶ˆè´¹è€…çš„ç±»å‹ï¼ša) ç±»ä¼¼ cron çš„å¾ªç¯ä½œä¸šï¼ˆä»é˜Ÿåˆ—ä¸­æ‹‰å–æ¶ˆæ¯ï¼‰ï¼› bï¼‰ç±»ä¼¼å®ˆæŠ¤è¿›ç¨‹ï¼ˆæ¨é€æ¨¡å‹ï¼‰

æ¶ˆæ¯å¹³å°ï¼š

* äºšé©¬é€Šäº‘çš„ç®€å•é˜Ÿåˆ—æœåŠ¡ ( SQS )ï¼ˆ ç®€å•ã€å®ç”¨ï¼›åˆ›ä¸šæ—©æœŸçš„ç»ä½³è§£å†³æ–¹æ¡ˆ ï¼‰ï¼›
* RabbitMQï¼ˆ æä¾›äº†å¾ˆå¤šç‰¹æ€§ï¼ˆåŒ…æ‹¬å¤æ‚çš„è·¯ç”±ï¼‰ï¼Œç›¸å½“ç®€å•ã€çµæ´» ï¼‰ï¼›
* ActiveMQï¼ˆ åŸºäº Javaï¼Œå»¶è¿Ÿä½å¾ˆå¤šï¼Œè·¯ç”±ä¸å¤ªçµæ´»ï¼Œå‘å¸ƒå¤§é‡æ¶ˆæ¯æ—¶å¯èƒ½ä¼šæ¯”è¾ƒæ•æ„Ÿ ï¼‰

### äº‹ä»¶é©±åŠ¨å‹æ¶æ„

* ä¸å†æ˜¯è¯·æ±‚/å“åº”æ¨¡å‹ï¼Œç»„ä»¶ä¼šå£°æ˜å·²ç»å‘ç”Ÿçš„äº‹ä»¶ï¼ˆè€Œä¸æ˜¯è¯·æ±‚å®ŒæˆæŸé¡¹å·¥ä½œï¼‰ï¼›
* **äº‹ä»¶**æ˜¯ä¸€ä¸ªæŒ‡ç¤ºæŸäº‹å‘ç”Ÿçš„å¯¹è±¡æˆ–æ¶ˆæ¯ï¼›
* æˆ‘ä»¬çš„å‘å¸ƒè€…å’Œæ¶ˆè´¹è€…å¯¹äºå½¼æ­¤ä¸€æ— æ‰€çŸ¥ â€”â€” ä»–ä»¬åªçŸ¥é“äº‹ä»¶æ¶ˆæ¯çš„æ ¼å¼å’Œå«ä¹‰ã€‚

### æœç´¢æ•°æ®

* ä¸€æ¬¡å…¨è¡¨æ‰«æå°±æ˜¯ä¸€æ¬¡æ™®é€šçš„æŸ¥æ‰¾ï¼ˆ éœ€è¦æ‰«ææ•´ä¸ªæ•°æ®é›†æ‰èƒ½æ‰¾åˆ°ç›®æ ‡æ•°æ® ï¼‰ï¼›
* ç´¢å¼•ç”¨äºåŠ å¿«æœç´¢é€Ÿåº¦ï¼š

![picture-03](https://miro.medium.com/max/1400/1*vuO2ixmhfuupOMv4ijqMyw.webp)
*ç´¢å¼•ç¤ºä¾‹*

* è‡³äºæ•°æ®æ¨¡å‹ï¼Œå…³ç³»å‹æ•°æ®æ¨¡å‹åˆ™æ˜¯ä¸€äº›æœ‰å…³è”çš„è¡¨çš„è¡¨ç°ã€‚åœ¨éå…³ç³»å‹æ•°æ®æ¨¡å‹ä¸­ï¼Œç”¨æˆ·å°†ä¼šä¸“æ³¨äºç”¨ä¾‹å¹¶è®¾è®¡ç›¸åº”çš„æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼šè¿”å›ä¸€ä¸ªäº§å“é›†åˆï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªåŒ…å«äº§å“åˆ—è¡¨çš„ JSON æ•°æ®ï¼‰ã€‚

* å»ºè®®ä½¿ç”¨æœç´¢å¼•æ“æ¥å®Œæˆå¤æ‚çš„æœç´¢æŸ¥è¯¢ã€‚ä»–ä»¬é€šå¸¸ä½¿ç”¨å…è®¸æœç´¢çŸ­è¯­æˆ–å•ä¸ªå•è¯çš„å€’æ’ç´¢å¼•ã€‚å³ç”¨å‹æœç´¢å¼•æ“åŒ…å«ï¼šäºšé©¬é€Šäº‘çš„ CloudSearchã€Azure Searchã€Elasticsearchã€Solrã€Sphinxã€‚

### è¿˜æœ‰æ›´å¤š...

å¯æ‰©å±•æ€§ä¸ä»…ä»…åªå—æ¶æ„å½±å“ï¼Œè¿˜å’Œä¸‹é¢è¿™äº›æœ‰å…³ï¼š

* å„ç§æµç¨‹çš„è‡ªåŠ¨åŒ–ï¼ˆæ— è®ºæ˜¯æµ‹è¯•ã€æ„å»ºã€éƒ¨ç½²æµç¨‹ã€ç›‘æ§å’Œå‘Šè­¦ï¼ŒæŠ‘æˆ–æ˜¯æ—¥å¿—èšåˆï¼‰ï¼›

* æ‰©å±•è‡ªå·±ï¼š

> æ›´èªæ˜åœ°å·¥ä½œï¼Œè€Œä¸æ˜¯æ›´åŠªåŠ›ï¼›

> é¿å…åŠ ç­ï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´ç²¾ç¥é—®é¢˜å’Œå€¦æ€ ï¼›

> æŒ‰ä¼˜å…ˆçº§é¡ºåºç®¡ç†ä»»åŠ¡ï¼Œäº†è§£å®ƒä»¬çš„çœŸæ­£ä»·å€¼ï¼›

> æ„å»ºç®€å•ã€ç®€çº¦çš„åŠŸèƒ½ï¼›

> å§”æ‰˜ä»£ç†ï¼›

> åˆ†äº«çŸ¥è¯†ï¼Œåä½œï¼›

> ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œä¸è¦é‡æ–°å‘æ˜è½®å­ï¼›

> åå•†æœ€åæœŸé™ï¼ˆ deadline ï¼‰ï¼›

> å°èŒƒå›´å‘å¸ƒï¼Œæ”¶é›†åé¦ˆï¼Œä¸è¦æƒ³å½“ç„¶åœ°å»å†™ä»£ç ï¼›

> ä¸ºç‰¹å®šäº§å“é¢†åŸŸç»„å»º 4-9 äººçš„å°å‹è·¨èŒèƒ½è‡ªä¸»å›¢é˜Ÿï¼ˆ ä¾‹å¦‚èšç„¦äºå¼€å‘ç»“è´¦åŠŸèƒ½çš„å›¢é˜Ÿ ï¼‰ï¼›

> ä¿æŒæ‰€æœ‰é¡¹ç›®ç¨‹åºå’Œæ ‡å‡†çš„çµæ´»æ€§ï¼Œå› ä¸ºå®ƒä»¬ä¼šé™åˆ¶åˆ›é€ åŠ›å’Œåˆ›æ–°ï¼›

> è°ƒæ•´å›¢é˜Ÿï¼Œè®¾å®šå…±åŒç›®æ ‡ï¼Œå»ºç«‹è‰¯å¥½çš„å·¥ç¨‹æ–‡åŒ–ï¼›

> ä¹¦é‡Œé¢è¿˜æœ‰æ›´å¤šæœ‰ç”¨çš„å»ºè®®ï¼

## ç»“è¯­

è€å®è¯´ï¼Œåœ¨çœ‹å®Œ Artur Ejsmont çš„ã€Š å†™ç»™åˆ›ä¸šå·¥ç¨‹å¸ˆçš„ Web å¯æ‰©å±•æ€§ ã€‹è¿™æœ¬ä¹¦åæˆ‘æ¾äº†ä¸€å£æ°”ï¼Œå› ä¸ºæˆ‘åœ¨å·¥ä½œä¸­å¬åˆ°äº†å¾ˆå¤šå…³äºè½¯ä»¶æ¶æ„å’Œå„ç§æŠ€æœ¯çš„ä¿¡æ¯ï¼Œä½†æˆ‘æ€»è§‰å¾—"æˆ‘æ²¡æœ‰å®Œå…¨ç†è§£"ã€‚æˆ‘æƒ³æ·±å…¥ç ”ç©¶ã€‚æˆ‘å¾ˆé«˜å…´å®ƒå‘ç”Ÿäº†ï¼

ä½†æ˜¯è¿˜æœ‰å¾ˆå¤šä¸œè¥¿è¦å­¦ ğŸ¤“

æ„Ÿè°¢æ‚¨é˜…è¯»æˆ‘çš„ç®€çŸ­æ€»ç»“ï¼ˆçœŸçš„å¾ˆçŸ­ï¼Œå› ä¸ºè¿™æœ¬ä¹¦åŒ…å«äº†æ›´å¤šæœ‰ä»·å€¼çš„ä¿¡æ¯ï¼‰ï¼Œå¸Œæœ›ä½ å–œæ¬¢æˆ‘çš„æ•…äº‹ï¼Œä¹Ÿä¼šå–œæ¬¢è¿™æœ¬ä¹¦ï¼

ä¸‹æ¬¡è§ï¼

**åŸæ–‡é“¾æ¥ï¼š[software-architecture-i-wish-i-had-known-about-this-earlier](https://medium.com/@olgamitroshyna/software-architecture-i-wish-i-had-known-about-this-earlier-4df43eae57db) ï¼ˆç¿»è¯‘ï¼šColstuwjxï¼‰**
